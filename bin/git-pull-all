#!/usr/bin/env bash
# 快速 pull 当前子目录所有的 git 仓库
# git-pull-all dirname

dir=$1
if [[ -z "${dir}" ]]; then
	dir=$(pwd)
else
	dir=$(cd ${dir};pwd)
fi

for i in $(ls -A -d $dir/*); do
	if [[ -d $i/.git ]]; then
		url=$(grep 'url' $i/.git/config | awk -F '= ' '{print $2}')
		echo "Pull" ${url}
		cd $i
		git pull
	fi
done